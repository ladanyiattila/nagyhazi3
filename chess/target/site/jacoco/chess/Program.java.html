<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Program.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Coverage with JaCoCo and Maven</a> &gt; <a href="index.source.html" class="el_package">chess</a> &gt; <span class="el_source">Program.java</span></div><h1>Program.java</h1><pre class="source lang-java linenums">package chess;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.event.*;
import java.io.IOException;
import java.util.List;

import javax.swing.*;

import pieces.*;

/**
 * Az alkalmazás GUI-jának megjelenítéséért felelős osztály
 */
public class Program {
    private Program() {
    }

    private static JFrame mainFrame;
    private static final String FONTNAME = &quot;Arial&quot;;
    private static final int CENTER = JLabel.CENTER;
    private static final int EXIT_ON_CLOSE = JFrame.EXIT_ON_CLOSE;
    private static final int TOP = JLabel.TOP;

    static {
<span class="nc" id="L30">        mainFrame = null;</span>
<span class="nc" id="L31">    }</span>

    /**
     * Megjeleníti a főmenüt
     */
    public static void startProgram() {
<span class="nc bnc" id="L37" title="All 2 branches missed.">        if (mainFrame == null) {</span>
<span class="nc" id="L38">            mainFrame = new JFrame();</span>
        }

<span class="nc" id="L41">        mainFrame.setSize(500, 500);</span>
<span class="nc" id="L42">        mainFrame.setResizable(false);</span>
<span class="nc" id="L43">        mainFrame.setTitle(&quot;Chess&quot;);</span>
<span class="nc" id="L44">        mainFrame.setDefaultCloseOperation(EXIT_ON_CLOSE);</span>
<span class="nc" id="L45">        mainFrame.setLayout(new BorderLayout());</span>

        // a főcím létrehozása
<span class="nc" id="L48">        JPanel titlePanel = new JPanel();</span>
<span class="nc" id="L49">        titlePanel.setPreferredSize(new Dimension(500, 50));</span>
<span class="nc" id="L50">        titlePanel.setLayout(new BorderLayout());</span>

<span class="nc" id="L52">        JLabel titleLabel = new JLabel();</span>
<span class="nc" id="L53">        titleLabel.setText(&quot;Chess&quot;);</span>
<span class="nc" id="L54">        titleLabel.setFont(new Font(FONTNAME, 0, 50));</span>
<span class="nc" id="L55">        titleLabel.setHorizontalAlignment(CENTER);</span>
<span class="nc" id="L56">        titleLabel.setVerticalAlignment(TOP);</span>
<span class="nc" id="L57">        titleLabel.setForeground(Color.black);</span>

<span class="nc" id="L59">        titlePanel.add(titleLabel);</span>

        // az alcím hozzáadása
<span class="nc" id="L62">        JPanel authorPanel = new JPanel();</span>
<span class="nc" id="L63">        authorPanel.setSize(new Dimension(500, 20));</span>
<span class="nc" id="L64">        authorPanel.setLayout(new BorderLayout());</span>

<span class="nc" id="L66">        JLabel authorLabel = new JLabel();</span>
<span class="nc" id="L67">        authorLabel.setText(&quot;Made by: Attila Ladányi&quot;);</span>
<span class="nc" id="L68">        authorLabel.setFont(new Font(FONTNAME, 0, 20));</span>
<span class="nc" id="L69">        authorLabel.setHorizontalAlignment(CENTER);</span>
<span class="nc" id="L70">        authorLabel.setVerticalAlignment(TOP);</span>
<span class="nc" id="L71">        authorLabel.setForeground(Color.black);</span>

<span class="nc" id="L73">        authorPanel.add(authorLabel);</span>

        // nyomógombok
<span class="nc" id="L76">        JPanel bottomPanel = new JPanel();</span>
<span class="nc" id="L77">        bottomPanel.setPreferredSize(new Dimension(150, 75));</span>
<span class="nc" id="L78">        bottomPanel.setLayout(new FlowLayout(FlowLayout.CENTER, 0, 0));</span>

<span class="nc" id="L80">        JPanel buttonsJPanel = new JPanel();</span>
<span class="nc" id="L81">        buttonsJPanel.setPreferredSize(new Dimension(150, 200));</span>
<span class="nc" id="L82">        buttonsJPanel.setLayout(new FlowLayout(FlowLayout.CENTER, 0, 0));</span>

<span class="nc" id="L84">        JButton startGameButton = new JButton(&quot;Start&quot;);</span>
<span class="nc" id="L85">        startGameButton.setPreferredSize(new Dimension(150, 25));</span>
<span class="nc" id="L86">        startGameButton.addActionListener((ActionEvent ae) -&gt; {</span>
<span class="nc" id="L87">            titlePanel.setVisible(false);</span>
<span class="nc" id="L88">            authorPanel.setVisible(false);</span>
<span class="nc" id="L89">            bottomPanel.setVisible(false);</span>
<span class="nc" id="L90">            startGame(null, &quot;&quot;, 1, null);</span>
<span class="nc" id="L91">        });</span>

<span class="nc" id="L93">        JButton readTextFileButton = new JButton(&quot;Load game&quot;);</span>
<span class="nc" id="L94">        readTextFileButton.setPreferredSize(new Dimension(150, 25));</span>
<span class="nc" id="L95">        readTextFileButton.addActionListener((ActionEvent ae) -&gt; {</span>
<span class="nc" id="L96">            titlePanel.setVisible(false);</span>
<span class="nc" id="L97">            bottomPanel.setVisible(false);</span>
<span class="nc" id="L98">            authorPanel.setVisible(false);</span>
<span class="nc" id="L99">            readTextFile();</span>
<span class="nc" id="L100">        });</span>

<span class="nc" id="L102">        JButton exitGameButton = new JButton(&quot;Exit&quot;);</span>
<span class="nc" id="L103">        exitGameButton.setPreferredSize(new Dimension(150, 25));</span>
<span class="nc" id="L104">        exitGameButton.addActionListener((ActionEvent ae) -&gt; {</span>
<span class="nc" id="L105">            mainFrame.setVisible(false);</span>
<span class="nc" id="L106">            System.exit(0);</span>
<span class="nc" id="L107">        });</span>

<span class="nc" id="L109">        buttonsJPanel.add(startGameButton);</span>
<span class="nc" id="L110">        buttonsJPanel.add(readTextFileButton);</span>
<span class="nc" id="L111">        buttonsJPanel.add(exitGameButton);</span>

<span class="nc" id="L113">        bottomPanel.add(buttonsJPanel);</span>

<span class="nc" id="L115">        mainFrame.add(titlePanel, BorderLayout.NORTH);</span>
<span class="nc" id="L116">        mainFrame.add(authorPanel, BorderLayout.CENTER);</span>

<span class="nc" id="L118">        mainFrame.add(bottomPanel, BorderLayout.SOUTH);</span>

<span class="nc" id="L120">        mainFrame.setVisible(true);</span>
<span class="nc" id="L121">    }</span>

    /**
     * Elindítja a játékot. Ha kapott paraméterként kiindulási pozíciót, akkor onnan
     * indítja a játékot
     * 
     * @param startingPos
     * @param movesListed
     * @param numberOfMoves
     * @param nextMoveColor
     */
    private static void startGame(List&lt;Piece&gt; startingPos, String movesListed, int numberOfMoves,
            PieceColor nextMoveColor) {
<span class="nc" id="L134">        mainFrame.setSize(1000, 750);</span>

<span class="nc" id="L136">        JTextArea movesText = new JTextArea();</span>
<span class="nc" id="L137">        movesText.setSize(new Dimension(300, 400));</span>
<span class="nc" id="L138">        movesText.enableInputMethods(false);</span>
<span class="nc" id="L139">        movesText.setEditable(false);</span>
<span class="nc" id="L140">        movesText.setLineWrap(true);</span>
<span class="nc" id="L141">        movesText.setWrapStyleWord(true);</span>
        // a lépések szövege helyesen jelenjen meg oldalt
<span class="nc" id="L143">        SwingUtilities.invokeLater(() -&gt; movesText.setText(movesListed));</span>

        // a doboz tartalma görgethető legyen
<span class="nc" id="L146">        JScrollPane movesScroll = new JScrollPane(movesText);</span>
<span class="nc" id="L147">        movesScroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);</span>
<span class="nc" id="L148">        movesScroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);</span>

<span class="nc" id="L150">        Board board = new Board(startingPos, movesListed, numberOfMoves, movesText, nextMoveColor);</span>

<span class="nc" id="L152">        JPanel bottomJPanel = new JPanel();</span>
<span class="nc" id="L153">        bottomJPanel.setLayout(new FlowLayout(FlowLayout.LEADING, 0, 0));</span>

<span class="nc" id="L155">        JButton backToMainMenu = new JButton(&quot;Back to main menu&quot;);</span>
<span class="nc" id="L156">        backToMainMenu.addActionListener((ActionEvent ae) -&gt; {</span>
<span class="nc" id="L157">            board.getBoardPanel().setVisible(false);</span>
<span class="nc" id="L158">            Program.startProgram();</span>
<span class="nc" id="L159">        });</span>

<span class="nc" id="L161">        bottomJPanel.add(backToMainMenu);</span>

<span class="nc" id="L163">        JButton saveGame = new JButton(&quot;Save game&quot;);</span>
<span class="nc" id="L164">        saveGame.addActionListener((ActionEvent ae) -&gt; {</span>
            try {
<span class="nc" id="L166">                PGN_Formatter.saveGame(movesText.getText());</span>
<span class="nc" id="L167">            } catch (IOException exception) {</span>
<span class="nc" id="L168">                exception.printStackTrace();</span>
            }
<span class="nc" id="L170">            board.getBoardPanel().setVisible(false);</span>
<span class="nc" id="L171">            Program.startProgram();</span>
<span class="nc" id="L172">        });</span>
<span class="nc" id="L173">        bottomJPanel.add(saveGame);</span>

<span class="nc" id="L175">        mainFrame.add(board.getBoardPanel(), BorderLayout.WEST);</span>
<span class="nc" id="L176">        mainFrame.add(movesScroll, BorderLayout.EAST);</span>
<span class="nc" id="L177">        mainFrame.add(bottomJPanel, BorderLayout.SOUTH);</span>
<span class="nc" id="L178">        mainFrame.setVisible(true);</span>
<span class="nc" id="L179">    }</span>

    /**
     * Játékok betöltése menü megjelenítéséért felel
     */
    private static void readTextFile() {
<span class="nc" id="L185">        JPanel textJPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));</span>
<span class="nc" id="L186">        textJPanel.setPreferredSize(new Dimension(500, 100));</span>

<span class="nc" id="L188">        JLabel titleLabel = new JLabel();</span>
<span class="nc" id="L189">        titleLabel.setText(&quot;Load game&quot;);</span>
<span class="nc" id="L190">        titleLabel.setFont(new Font(FONTNAME, 0, 30));</span>
<span class="nc" id="L191">        titleLabel.setForeground(Color.black);</span>
<span class="nc" id="L192">        textJPanel.add(titleLabel);</span>

<span class="nc" id="L194">        JLabel descriptionLabel = new JLabel();</span>
<span class="nc" id="L195">        descriptionLabel.setText(&quot;Enter the .txt file's name which contains the game you would like to load.&quot;);</span>
<span class="nc" id="L196">        descriptionLabel.setFont(new Font(FONTNAME, 0, 14));</span>
<span class="nc" id="L197">        descriptionLabel.setForeground(Color.black);</span>
<span class="nc" id="L198">        textJPanel.add(descriptionLabel);</span>

<span class="nc" id="L200">        JLabel noteLabel = new JLabel(&quot;(Note: the file must be in the saved_games folder)&quot;);</span>
<span class="nc" id="L201">        noteLabel.setFont(new Font(FONTNAME, 0, 12));</span>
<span class="nc" id="L202">        noteLabel.setForeground(Color.gray);</span>
<span class="nc" id="L203">        textJPanel.add(noteLabel);</span>

<span class="nc" id="L205">        JPanel entryPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 0));</span>

<span class="nc" id="L207">        JPanel backToMenuPanel = new JPanel();</span>

<span class="nc" id="L209">        JButton backToMenuButton = new JButton(&quot;Back to main menu&quot;);</span>
<span class="nc" id="L210">        backToMenuButton.addActionListener((ActionEvent ae) -&gt; {</span>
<span class="nc" id="L211">            textJPanel.setVisible(false);</span>
<span class="nc" id="L212">            entryPanel.setVisible(false);</span>
<span class="nc" id="L213">            backToMenuPanel.setVisible(false);</span>
<span class="nc" id="L214">            startProgram();</span>
<span class="nc" id="L215">        });</span>
<span class="nc" id="L216">        backToMenuPanel.add(backToMenuButton);</span>

<span class="nc" id="L218">        JTextField textField = new JTextField(30);</span>
<span class="nc" id="L219">        entryPanel.add(textField);</span>

<span class="nc" id="L221">        JButton button = new JButton(&quot;LOAD&quot;);</span>
<span class="nc" id="L222">        button.addActionListener((ActionEvent ae) -&gt; {</span>
            try {
<span class="nc" id="L224">                List&lt;Piece&gt; list = PGN_Formatter.readFromTextFile(textField.getText());</span>

<span class="nc" id="L226">                textJPanel.setVisible(false);</span>
<span class="nc" id="L227">                entryPanel.setVisible(false);</span>
<span class="nc" id="L228">                backToMenuPanel.setVisible(false);</span>

<span class="nc bnc" id="L230" title="All 2 branches missed.">                if (list.isEmpty()) {</span>
<span class="nc" id="L231">                    startGame(null, PGN_Formatter.getMovesListed(textField.getText()), 1, null);</span>
<span class="nc" id="L232">                } else {</span>
<span class="nc" id="L233">                    startGame(list, PGN_Formatter.getMovesListed(textField.getText()),</span>
<span class="nc" id="L234">                            PGN_Formatter.getNumberOfMoves(textField.getText()),</span>
<span class="nc" id="L235">                            PGN_Formatter.getNextMoveColor(textField.getText()));</span>
                }
<span class="nc" id="L237">            } catch (Exception exception) {</span>
<span class="nc" id="L238">                errorWhenLoadingGame();</span>
            }
<span class="nc" id="L240">        });</span>
<span class="nc" id="L241">        entryPanel.add(button);</span>

<span class="nc" id="L243">        mainFrame.add(textJPanel, BorderLayout.NORTH);</span>
<span class="nc" id="L244">        mainFrame.add(entryPanel, BorderLayout.CENTER);</span>
<span class="nc" id="L245">        mainFrame.add(backToMenuPanel, BorderLayout.SOUTH);</span>

<span class="nc" id="L247">        mainFrame.setVisible(true);</span>
<span class="nc" id="L248">    }</span>

    /**
     * Nem létező fájl betöltése esetén hibaüzenetet jelenít meg
     */
    private static void errorWhenLoadingGame() {
<span class="nc" id="L254">        JFrame errorFrame = new JFrame(&quot;Error&quot;);</span>
<span class="nc" id="L255">        errorFrame.setSize(400, 200);</span>
<span class="nc" id="L256">        errorFrame.setResizable(false);</span>
<span class="nc" id="L257">        errorFrame.setDefaultCloseOperation(EXIT_ON_CLOSE);</span>
<span class="nc" id="L258">        errorFrame.setLayout(new BorderLayout());</span>

<span class="nc" id="L260">        JLabel label = new JLabel(&quot;Error when loading game:&quot;);</span>
<span class="nc" id="L261">        label.setFont(new Font(FONTNAME, 0, 14));</span>
<span class="nc" id="L262">        label.setForeground(Color.red);</span>

<span class="nc" id="L264">        JLabel label2 = new JLabel(&quot;file not found in saved_games directory&quot;);</span>
<span class="nc" id="L265">        label2.setFont(new Font(FONTNAME, 0, 14));</span>
<span class="nc" id="L266">        label2.setForeground(Color.red);</span>

<span class="nc" id="L268">        JPanel panel = new JPanel();</span>
<span class="nc" id="L269">        panel.setPreferredSize(new Dimension(400, 100));</span>
<span class="nc" id="L270">        panel.add(label);</span>
<span class="nc" id="L271">        panel.add(label2);</span>

<span class="nc" id="L273">        JButton backToMainMenu = new JButton(&quot;Back to main menu&quot;);</span>
<span class="nc" id="L274">        backToMainMenu.addActionListener((ActionEvent ae) -&gt; {</span>
<span class="nc" id="L275">            panel.setVisible(false);</span>
<span class="nc" id="L276">            backToMainMenu.setVisible(false);</span>
<span class="nc" id="L277">            errorFrame.setVisible(false);</span>
<span class="nc" id="L278">            Program.startProgram();</span>
<span class="nc" id="L279">        });</span>

<span class="nc" id="L281">        errorFrame.add(panel, BorderLayout.NORTH);</span>
<span class="nc" id="L282">        errorFrame.add(backToMainMenu, BorderLayout.SOUTH);</span>

<span class="nc" id="L284">        errorFrame.setVisible(true);</span>
<span class="nc" id="L285">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>